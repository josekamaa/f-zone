<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test f-zone Appwrite Setup</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0f0c29 0%, #302b63 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 700px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
        }
        
        header {
            background: linear-gradient(45deg, #6a11cb, #2575fc);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .project-info {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 10px;
            text-align: left;
            display: inline-block;
        }
        
        .info-item {
            margin: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-label {
            font-weight: bold;
            color: #ffcc00;
        }
        
        .info-value {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 1.1rem;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #6a11cb;
        }
        
        .section-title {
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }
        
        .test-section {
            background: #e7f6ec;
            border-left-color: #2ed573;
        }
        
        .btn {
            padding: 15px 30px;
            background: linear-gradient(to right, #6a11cb, #2575fc);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 10px 5px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(106, 17, 203, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-success {
            background: linear-gradient(to right, #2ed573, #1dd1a1);
        }
        
        .btn-warning {
            background: linear-gradient(to right, #ff9a00, #ff6a00);
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            display: none;
        }
        
        .loading i {
            font-size: 24px;
            color: #6a11cb;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .result-box {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
        
        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        .warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }
        
        .info {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        
        .code-block {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            margin: 15px 0;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        
        .next-steps {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #ffc107;
        }
        
        .steps-list {
            margin-left: 20px;
            margin-top: 10px;
        }
        
        .steps-list li {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 0.9rem;
        }
        
        .console-box {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 13px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
        
        .console-header {
            color: #ff9a00;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-check-circle"></i> f-zone Appwrite Setup</h1>
            <div class="project-info">
                <div class="info-item">
                    <span class="info-label">Project Name:</span>
                    <span class="info-value">f-zone</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Project ID:</span>
                    <span class="info-value" id="projectIdValue">jose1235</span>
                </div>
                <div class="info-item">
                    <span class="info-label">API Endpoint:</span>
                    <span class="info-value">https://sgp.cloud.appwrite.io/v1</span>
                </div>
            </div>
        </header>
        
        <div class="content">
            <div class="section">
                <h2 class="section-title"><i class="fas fa-info-circle"></i> Your Configuration</h2>
                <p>You're all set! Here's what you need for your registration page:</p>
                
                <div class="code-block">
// Copy this configuration to your registration page:
const APPWRITE_ENDPOINT = 'https://sgp.cloud.appwrite.io/v1';
const APPWRITE_PROJECT_ID = 'jose1235';
const APPWRITE_DATABASE_ID = 'F_Zone_DB';  // Create this in Appwrite
const APPWRITE_COLLECTION_ID = 'users';    // Create this in Appwrite
                </div>
                
                <p><strong>Note:</strong> You still need to create the database and collection in Appwrite Console.</p>
            </div>
            
            <div class="section test-section">
                <h2 class="section-title"><i class="fas fa-plug"></i> Test Your Setup</h2>
                <p>Let's verify your Appwrite connection is working:</p>
                
                <button class="btn" id="testConnectionBtn">
                    <i class="fas fa-bolt"></i> Test Connection
                </button>
                
                <button class="btn btn-success" id="createTestUserBtn">
                    <i class="fas fa-user-plus"></i> Create Test User
                </button>
                
                <button class="btn btn-warning" id="checkLocalBtn">
                    <i class="fas fa-laptop-house"></i> Check LocalStorage
                </button>
                
                <div class="loading" id="loading">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p id="loadingText">Testing connection...</p>
                </div>
                
                <div class="result-box" id="resultBox"></div>
                
                <div class="console-box" id="consoleBox">
                    <div class="console-header">
                        <span>Debug Console</span>
                        <button onclick="document.getElementById('consoleBox').style.display='none'" style="background:none;border:none;color:#ff9a00;cursor:pointer;">√ó</button>
                    </div>
                    <div id="consoleOutput"></div>
                </div>
            </div>
            
            <div class="next-steps">
                <h2 class="section-title" style="color: #856404;"><i class="fas fa-forward"></i> Next Steps</h2>
                <ol class="steps-list">
                    <li><strong>Create Database in Appwrite:</strong> Go to Database ‚Üí Create Database ‚Üí Name: <code>F_Zone_DB</code></li>
                    <li><strong>Create Collection:</strong> Inside F_Zone_DB, create collection named <code>users</code></li>
                    <li><strong>Add Attributes:</strong> Add these columns to users collection:
                        <ul style="margin-left: 20px; margin-top: 5px;">
                            <li><code>displayName</code> (string, required)</li>
                            <li><code>email</code> (string, required)</li>
                            <li><code>password</code> (string, required)</li>
                            <li><code>status</code> (string, default: "offline")</li>
                        </ul>
                    </li>
                    <li><strong>Update Registration Page:</strong> Use the configuration above</li>
                    <li><strong>Test Registration:</strong> Create your first user!</li>
                </ol>
            </div>
        </div>
        
        <footer>
            <p>f-zone Appwrite Setup Helper | Project ID: <strong>jose1235</strong></p>
        </footer>
    </div>

    <script>
        // Your Appwrite Configuration
        const APPWRITE_ENDPOINT = 'https://sgp.cloud.appwrite.io/v1';
        const APPWRITE_PROJECT_ID = 'jose1235';
        
        // DOM Elements
        const testConnectionBtn = document.getElementById('testConnectionBtn');
        const createTestUserBtn = document.getElementById('createTestUserBtn');
        const checkLocalBtn = document.getElementById('checkLocalBtn');
        const loading = document.getElementById('loading');
        const loadingText = document.getElementById('loadingText');
        const resultBox = document.getElementById('resultBox');
        const consoleBox = document.getElementById('consoleBox');
        const consoleOutput = document.getElementById('consoleOutput');
        
        // Console logging
        function logToConsole(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            let color = '#00ff00';
            let icon = '>';
            
            switch(type) {
                case 'error': color = '#ff4757'; icon = '‚úó'; break;
                case 'warning': color = '#ffa502'; icon = '‚ö†'; break;
                case 'success': color = '#2ed573'; icon = '‚úì'; break;
                case 'debug': color = '#2e86de'; icon = '‚ö°'; break;
            }
            
            const logEntry = document.createElement('div');
            logEntry.innerHTML = `<span style="color: #666;">[${timestamp}]</span> <span style="color: ${color};">${icon} ${message}</span>`;
            consoleOutput.appendChild(logEntry);
            
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            consoleBox.style.display = 'block';
            
            console.log(`[${type}] ${message}`);
        }
        
        // Show result
        function showResult(type, message) {
            resultBox.className = `result-box ${type}`;
            resultBox.innerHTML = message;
            resultBox.style.display = 'block';
        }
        
        // Test Connection
        testConnectionBtn.addEventListener('click', async function() {
            loading.style.display = 'block';
            loadingText.textContent = 'Testing Appwrite connection...';
            resultBox.style.display = 'none';
            
            logToConsole(`Testing connection to ${APPWRITE_ENDPOINT}`, 'debug');
            logToConsole(`Using Project ID: ${APPWRITE_PROJECT_ID}`, 'debug');
            
            try {
                // Test 1: Basic connection
                const response = await fetch(APPWRITE_ENDPOINT, {
                    method: 'GET',
                    headers: {
                        'X-Appwrite-Project': APPWRITE_PROJECT_ID,
                        'Content-Type': 'application/json'
                    }
                });
                
                logToConsole(`HTTP Status: ${response.status}`, response.ok ? 'success' : 'warning');
                
                if (response.ok) {
                    // Test 2: Get project info
                    const projectResponse = await fetch(`${APPWRITE_ENDPOINT}/projects/${APPWRITE_PROJECT_ID}`, {
                        method: 'GET',
                        headers: {
                            'X-Appwrite-Project': APPWRITE_PROJECT_ID,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (projectResponse.ok) {
                        const projectData = await projectResponse.json();
                        logToConsole(`Project found: ${projectData.name}`, 'success');
                        
                        showResult('success', 
                            `<strong>‚úÖ Connection Successful!</strong><br><br>
                            <strong>Project:</strong> ${projectData.name}<br>
                            <strong>Region:</strong> Singapore<br>
                            <strong>Status:</strong> Active<br><br>
                            <i class="fas fa-check-circle"></i> Your Appwrite setup is working perfectly!<br><br>
                            <small>Now you need to create the database and collection.</small>`
                        );
                        
                        createTestUserBtn.disabled = false;
                        
                    } else {
                        logToConsole(`Project API returned: ${projectResponse.status}`, 'warning');
                        showResult('warning', 
                            `<strong>‚ö† Basic Connection OK</strong><br><br>
                            Appwrite is reachable but project details are limited.<br>
                            This might be normal without API keys.<br><br>
                            <i class="fas fa-exclamation-triangle"></i> Try creating the database first.`
                        );
                    }
                } else {
                    logToConsole(`Connection failed: HTTP ${response.status}`, 'error');
                    showResult('error', 
                        `<strong>‚ùå Connection Failed</strong><br><br>
                        HTTP Status: ${response.status}<br><br>
                        <strong>Possible issues:</strong><br>
                        1. Project ID is incorrect<br>
                        2. Project doesn't exist<br>
                        3. Network issues<br><br>
                        <i class="fas fa-times-circle"></i> Please verify your Project ID.`
                    );
                }
                
            } catch (error) {
                logToConsole(`Network error: ${error.message}`, 'error');
                showResult('error', 
                    `<strong>‚ùå Network Error</strong><br><br>
                    <strong>Error:</strong> ${error.message}<br><br>
                    <i class="fas fa-times-circle"></i> Check your internet connection.`
                );
            } finally {
                loading.style.display = 'none';
            }
        });
        
        // Create Test User (simulated)
        createTestUserBtn.addEventListener('click', async function() {
            loading.style.display = 'block';
            loadingText.textContent = 'Creating test user...';
            
            logToConsole('Simulating user creation...', 'debug');
            
            try {
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Create test user data
                const testUser = {
                    displayName: 'Test User',
                    email: 'test@fzone.com',
                    password: 'hashed_password_here',
                    status: 'offline',
                    createdAt: new Date().toISOString()
                };
                
                logToConsole('Test user data created', 'success');
                logToConsole(`Display Name: ${testUser.displayName}`, 'info');
                logToConsole(`Email: ${testUser.email}`, 'info');
                
                // Save to localStorage as example
                const existingUsers = JSON.parse(localStorage.getItem('fzone_test_users') || '[]');
                existingUsers.push({
                    $id: 'test_' + Date.now(),
                    ...testUser
                });
                localStorage.setItem('fzone_test_users', JSON.stringify(existingUsers));
                
                showResult('success', 
                    `<strong>‚úÖ Test User Created (Simulated)</strong><br><br>
                    <strong>Name:</strong> ${testUser.displayName}<br>
                    <strong>Email:</strong> ${testUser.email}<br>
                    <strong>Status:</strong> ${testUser.status}<br><br>
                    <i class="fas fa-check-circle"></i> This simulates what will happen in your registration page.<br>
                    <i class="fas fa-info-circle"></i> Saved to localStorage for demonstration.`
                );
                
            } catch (error) {
                logToConsole(`Error: ${error.message}`, 'error');
                showResult('error', `Error creating test user: ${error.message}`);
            } finally {
                loading.style.display = 'none';
            }
        });
        
        // Check LocalStorage
        checkLocalBtn.addEventListener('click', function() {
            const testUsers = JSON.parse(localStorage.getItem('fzone_test_users') || '[]');
            const registeredUsers = JSON.parse(localStorage.getItem('fzone_users') || '[]');
            
            logToConsole(`Found ${testUsers.length} test user(s) in localStorage`, 'info');
            logToConsole(`Found ${registeredUsers.length} registered user(s) in localStorage`, 'info');
            
            if (testUsers.length > 0 || registeredUsers.length > 0) {
                let userList = '';
                
                if (testUsers.length > 0) {
                    userList += '<h4>Test Users (from this page):</h4>';
                    testUsers.forEach((user, index) => {
                        userList += `<div style="padding: 10px; margin: 5px 0; background: #e7f6ec; border-radius: 5px;">
                            <strong>${index + 1}. ${user.displayName}</strong><br>
                            <small>Email: ${user.email}</small>
                        </div>`;
                    });
                }
                
                if (registeredUsers.length > 0) {
                    userList += '<h4 style="margin-top: 15px;">Registered Users (from registration page):</h4>';
                    registeredUsers.forEach((user, index) => {
                        userList += `<div style="padding: 10px; margin: 5px 0; background: #e7f3ff; border-radius: 5px;">
                            <strong>${index + 1}. ${user.displayName || 'Unnamed'}</strong><br>
                            <small>Email: ${user.email || 'No email'}</small>
                        </div>`;
                    });
                }
                
                showResult('info', 
                    `<strong>üì¶ LocalStorage Contents</strong><br><br>
                    ${userList}<br>
                    <i class="fas fa-info-circle"></i> These users are stored locally in your browser.`
                );
            } else {
                showResult('info', 
                    `<strong>üì¶ LocalStorage Empty</strong><br><br>
                    No users found in localStorage.<br>
                    <i class="fas fa-info-circle"></i> This is normal if you haven't created any test users yet.`
                );
            }
        });
        
        // Initialize
        window.addEventListener('load', function() {
            logToConsole('f-zone Appwrite Test Page Loaded', 'success');
            logToConsole(`Project ID: ${APPWRITE_PROJECT_ID}`, 'info');
            logToConsole(`Endpoint: ${APPWRITE_ENDPOINT}`, 'info');
        });
    </script>
</body>
</html>
